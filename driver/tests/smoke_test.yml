# Let's run a "MAM4" configuration. Modes are indexed automatically.
modes:
  aitken:
    D_min: 0.0087
    D_nom: 0.026
    D_max: 0.052
    sigma: 1.6
    rhcrystal: 0.35
    rhdeliq: 0.8
  accumulation:
    D_min: 0.0535
    D_nom: 0.11
    D_max: 0.44
    sigma: 1.8
    rhcrystal: 0.35
    rhdeliq: 0.8
  coarse:
    D_min: 1
    D_nom: 2
    D_max: 4
    sigma: 1.8
    rhcrystal: 0.35
    rhdeliq: 0.8
  primary_carbon:
    D_min: 0.01
    D_nom: 0.05
    D_max: 0.1
    sigma: 1.6
    rhcrystal: 0.35
    rhdeliq: 0.8

# Aerosol species can belong to more than one mode, and are indexed within
# each mode automatically.
aerosols:
  SO4:
    name: sulfate
  NH4:
    name: ammonium
  POA:
    name: primary organic aerosol
  SOA:
    name: secondary organic aerosol
  BC:
    name: black carbon
  SS:
    name: sea salt
  DST:
    name: dust
  MOA:
    name: marine organic aerosol
  NCL:
    name: unknown

# Gas species present. Also indexed automatically.
gases:
  SO2:
    name: sulfur dioxide
  H2SO4:
    name: sulfuric acid
  SOAG:
    name: single semi-volatile organic gas-phase species
  NH3:
    name: ammonia

# Here we can turn various aerosol physical processes on and off.
physics:
  growth:               true
  gas_chemistry:        false
  cloud_chemistry:      false
  gas_aerosol_exchange: true
  mode_transfer:        true
  nucleation:           true
  coagulation:          true

# ambient atmospheric conditions for each column.
atmosphere:
  Tv0:      301.0
  Gammav:   0.02
  w0:       2.1
  ztop:     12000
  tperiod:  450
  qv0:      0.002
  qv1:      0.001


# Grid geometry
grid:
  num_columns: 1
  num_levels:  72

# Multiple initial values specified anywhere in this section cause the driver to
# run in "ensemble mode", in which the outer product of all initial conditions are run in an ensemble of
# simulations.
initial_conditions:
  # We specify initial conditions for aerosol species mass fractions for each
  # mode. A species is interpreted to belong to as many modes as it has
  # initial conditions, so it's important to initialize mass fractions for all
  # modes relevant to an aerosol species. Species for which there are no initial
  # conditions are excluded from the simulation.
  # NOTE: mass fractions must sum to 1.
  aerosols:
    accumulation:
      SO4: 0.3
      POA: 0
      SOA: 0.3
      BC: 0
      DST: 0
      NCL: 0.4
    aitken:
      SO4: 0.3
      SOA: 0.3
      NCL: 0.4
    coarse:
      DST: 0
      NCL: 0.4
      SO4: 0.3
      BC: 0
      POA: 0
      SOA: 0.3
    primary_carbon:
      POA: 0
      BC: 1

  # Initial conditions for gases are mole fractions [kmol gas/kmol air].
  # Gases for which initial conditions are not given are excluded from the
  # simulation.
  gases:
    SO2: 1.e-4
    H2SO4: 1.e-13
    SOAG:  5.e-10

  # Here we specify the number densities [#/m**3] for each mode.
  modes:
    accumulation: 1.e8
    aitken: 1.e9
    coarse: 1.e5
    primary_carbon: 5.e8

# Chemistry is pretty simplistic at the moment.
chemistry:
  # This specifies a constant production rate for a gas [mol gas / mol air / s]
  production:
    H2S04: 1.0e-16

# Simulation parameters.
simulation:
  timestep: 1  # [s]
  duration: 1800 # [s]
  output:
    directory: .       # directory in which to generate output files
    prefix: smoke_test # prefix for each output file
    frequency: 1       # number of steps between output dumps
